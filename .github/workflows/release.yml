name: Release

on:
  push:
    tags: [ 'v*' ]

jobs:
  build-windows:
    runs-on: windows-latest
    name: Build Windows Release

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: Install dependencies
        run: |
          pip install pygame
          pip install pyinstaller

      - name: Build executable
        run: pyinstaller --onefile --windowed --name GameCollection main.py

      - name: Create Release
        uses: softprops/action-gh-release@v2
        with:
          files: dist/GameCollection.exe
          name: Release ${{ github.ref_name }}
          body: |
            üéÆ **–ö–æ–ª–ª–µ–∫—Ü–∏—è –∏–≥—Ä v${{ github.ref_name }}**

            ## üéØ –ß—Ç–æ –Ω–æ–≤–æ–≥–æ:
            - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ Windows exe
            - ‚úÖ –í—Å–µ 4 –∏–≥—Ä—ã: –ó–º–µ–π–∫–∞, –ê—Ä–∫–∞–Ω–æ–∏–¥, –¢–µ—Ç—Ä–∏—Å, Pac-Man
            - ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏ –∏ –∞–Ω–∏–º–∞—Ü–∏–∏
            - ‚úÖ –ì–æ—Ç–æ–≤—ã–π –∫ –∑–∞–ø—É—Å–∫—É –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª

            ## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞:
            1. –°–∫–∞—á–∞–π—Ç–µ `GameCollection.exe`
            2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª
            3. –ù–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å –∏–≥—Ä–æ–π!

            ## üéÆ –ò–≥—Ä—ã:
            - **üêç –ó–º–µ–π–∫–∞** - —Å –±–æ–º–±–∞–º–∏ –∏ –∑–æ–ª–æ—Ç—ã–º–∏ —è–±–ª–æ–∫–∞–º–∏
            - **üéØ –ê—Ä–∫–∞–Ω–æ–∏–¥** - —Å —Ä–∞–∫–µ—Ç–∞–º–∏ –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –º—è—á–∞–º–∏
            - **üß© –¢–µ—Ç—Ä–∏—Å** - —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π —É—Ä–æ–≤–Ω–µ–π
            - **üëª Pac-Man** - —Å –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –ª–∞–±–∏—Ä–∏–Ω—Ç–æ–≤

            ---
            *–°–æ–±—Ä–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å –ø–æ–º–æ—â—å—é GitHub Actions*
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

  build-linux:
    runs-on: ubuntu-latest
    name: Build Linux Release

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: Install dependencies
        run: |
          pip install pygame
          pip install pyinstaller

      - name: Build executable
        run: pyinstaller --onefile --name GameCollection main.py

      - name: Create Release
        uses: softprops/action-gh-release@v2
        with:
          files: dist/GameCollection
          name: Release ${{ github.ref_name }}
          body: |
            üéÆ **–ö–æ–ª–ª–µ–∫—Ü–∏—è –∏–≥—Ä v${{ github.ref_name }}**

            ## üéØ –ß—Ç–æ –Ω–æ–≤–æ–≥–æ:
            - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ Linux –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞
            - ‚úÖ –í—Å–µ 4 –∏–≥—Ä—ã: –ó–º–µ–π–∫–∞, –ê—Ä–∫–∞–Ω–æ–∏–¥, –¢–µ—Ç—Ä–∏—Å, Pac-Man
            - ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏ –∏ –∞–Ω–∏–º–∞—Ü–∏–∏
            - ‚úÖ –ì–æ—Ç–æ–≤—ã–π –∫ –∑–∞–ø—É—Å–∫—É –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª

            ## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞:
            1. –°–∫–∞—á–∞–π—Ç–µ `GameCollection`
            2. –°–¥–µ–ª–∞–π—Ç–µ —Ñ–∞–π–ª –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º: `chmod +x GameCollection`
            3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: `./GameCollection`

            ## üéÆ –ò–≥—Ä—ã:
            - **üêç –ó–º–µ–π–∫–∞** - —Å –±–æ–º–±–∞–º–∏ –∏ –∑–æ–ª–æ—Ç—ã–º–∏ —è–±–ª–æ–∫–∞–º–∏
            - **üéØ –ê—Ä–∫–∞–Ω–æ–∏–¥** - —Å —Ä–∞–∫–µ—Ç–∞–º–∏ –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –º—è—á–∞–º–∏
            - **üß© –¢–µ—Ç—Ä–∏—Å** - —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π —É—Ä–æ–≤–Ω–µ–π
            - **üëª Pac-Man** - —Å –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –ª–∞–±–∏—Ä–∏–Ω—Ç–æ–≤

            ---
            *–°–æ–±—Ä–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å –ø–æ–º–æ—â—å—é GitHub Actions*
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
