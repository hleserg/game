name: Release

on:
  push:
    tags: [ 'v*' ]

jobs:
  build-windows:
    runs-on: windows-latest
    name: Build Windows Release

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: Install dependencies
        run: |
          pip install pygame
          pip install pyinstaller

      - name: Build executable
        run: pyinstaller --onefile --windowed --name GameCollection src/game/__main__.py

      - name: Create Release
        uses: softprops/action-gh-release@v2
        with:
          files: dist/GameCollection.exe
          name: Release ${{ github.ref_name }}
          body: |
            üéÆ **Game Collection v${{ github.ref_name }}**

            ## üéØ –ß—Ç–æ –Ω–æ–≤–æ–≥–æ:
            - ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞–ª–æ–∂–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –≤ –¢–µ—Ç—Ä–∏—Å–µ
            - ‚úÖ –ü–µ—Ä–µ–º–µ—â–µ–Ω–∞ —Å–µ–∫—Ü–∏—è '–°–ª–µ–¥—É—é—â–∞—è' –Ω–∏–∂–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –¢–µ—Ç—Ä–∏—Å–µ
            - ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–æ–≤ —Å—Ç—Ä–µ–ª–æ–∫ –≤ –ê—Ä–∫–∞–Ω–æ–∏–¥–µ
            - ‚úÖ –£–º–µ–Ω—å—à–µ–Ω —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –≤ –ê—Ä–∫–∞–Ω–æ–∏–¥–µ
            - ‚úÖ –ü–µ—Ä–µ–º–µ—â–µ–Ω —Ç–µ–∫—Å—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤—ã—à–µ –∫–∏—Ä–ø–∏—á–µ–π –≤ –ê—Ä–∫–∞–Ω–æ–∏–¥–µ
            - ‚úÖ –°–º–µ—â–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤–ª–µ–≤–æ –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é

            ## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞:
            1. –°–∫–∞—á–∞–π—Ç–µ `GameCollection.exe`
            2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª
            3. –ù–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å –∏–≥—Ä–æ–π!

            ## üéÆ –ò–≥—Ä—ã:
            - **üêç Snake** - Classic snake game with growing mechanics
            - **üéØ Arkanoid** - Breakout-style game with paddle and ball physics
            - **üß© Tetris** - Block-stacking puzzle game with line clearing
            - **üëª Pac-Man** - Maze navigation game with dots and ghosts

            ## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è:
            - –£–ª—É—á—à–µ–Ω–æ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ UI
            - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —Å–∏–º–≤–æ–ª–æ–≤
            - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Ä–∞–∑–º–µ—Ä—ã —à—Ä–∏—Ñ—Ç–æ–≤
            - –£–ª—É—á—à–µ–Ω–∞ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
            - –î–æ–±–∞–≤–ª–µ–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å API —Ç–æ–∫–µ–Ω–æ–≤

            ---
            *–°–æ–±—Ä–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å –ø–æ–º–æ—â—å—é GitHub Actions*
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

  build-linux:
    runs-on: ubuntu-latest
    name: Build Linux Release

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'

      - name: Install dependencies
        run: |
          pip install pygame
          pip install pyinstaller

      - name: Build executable
        run: pyinstaller --onefile --name GameCollection src/game/__main__.py

      - name: Create Release
        uses: softprops/action-gh-release@v2
        with:
          files: dist/GameCollection
          name: Release ${{ github.ref_name }}
          body: |
            üéÆ **Game Collection v${{ github.ref_name }}**

            ## üéØ –ß—Ç–æ –Ω–æ–≤–æ–≥–æ:
            - ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞–ª–æ–∂–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –≤ –¢–µ—Ç—Ä–∏—Å–µ
            - ‚úÖ –ü–µ—Ä–µ–º–µ—â–µ–Ω–∞ —Å–µ–∫—Ü–∏—è '–°–ª–µ–¥—É—é—â–∞—è' –Ω–∏–∂–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –¢–µ—Ç—Ä–∏—Å–µ
            - ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–æ–≤ —Å—Ç—Ä–µ–ª–æ–∫ –≤ –ê—Ä–∫–∞–Ω–æ–∏–¥–µ
            - ‚úÖ –£–º–µ–Ω—å—à–µ–Ω —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –≤ –ê—Ä–∫–∞–Ω–æ–∏–¥–µ
            - ‚úÖ –ü–µ—Ä–µ–º–µ—â–µ–Ω —Ç–µ–∫—Å—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤—ã—à–µ –∫–∏—Ä–ø–∏—á–µ–π –≤ –ê—Ä–∫–∞–Ω–æ–∏–¥–µ
            - ‚úÖ –°–º–µ—â–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤–ª–µ–≤–æ –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é

            ## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞:
            1. –°–∫–∞—á–∞–π—Ç–µ `GameCollection`
            2. –°–¥–µ–ª–∞–π—Ç–µ —Ñ–∞–π–ª –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º: `chmod +x GameCollection`
            3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: `./GameCollection`

            ## üéÆ –ò–≥—Ä—ã:
            - **üêç Snake** - Classic snake game with growing mechanics
            - **üéØ Arkanoid** - Breakout-style game with paddle and ball physics
            - **üß© Tetris** - Block-stacking puzzle game with line clearing
            - **üëª Pac-Man** - Maze navigation game with dots and ghosts

            ## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è:
            - –£–ª—É—á—à–µ–Ω–æ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ UI
            - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —Å–∏–º–≤–æ–ª–æ–≤
            - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Ä–∞–∑–º–µ—Ä—ã —à—Ä–∏—Ñ—Ç–æ–≤
            - –£–ª—É—á—à–µ–Ω–∞ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
            - –î–æ–±–∞–≤–ª–µ–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å API —Ç–æ–∫–µ–Ω–æ–≤

            ---
            *–°–æ–±—Ä–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å –ø–æ–º–æ—â—å—é GitHub Actions*
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
